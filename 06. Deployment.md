## Deployment Literatur

1. Clone aplikasi

       git clone https://github.com/frenkyst/literatur-backend.git
       git clone https://github.com/frenkyst/literatur-frontend.git

![image](https://user-images.githubusercontent.com/40049149/192791872-2e342ae2-1b06-42e4-b8ac-c382808b6bd1.png)

2. Gunakan Brach Production

       git checkout Production

![image](https://user-images.githubusercontent.com/40049149/192795883-222b86fa-0ba7-4696-8d30-d1ed51e6ff55.png)

## Deploy Backend 

1. Buat Dockerfile di directory backEnd

       FROM node:15
       WORKDIR /app
       ENV NODE_ENV=production
       ENV DATABASE_URL=postgresql://menther:Bootcamp13@103.187.147.155:5432/literature
       COPY . .
       RUN npm install -g nodemon
       RUN npm install sequelize-cli -g
       RUN npx sequelize db:migrate
       EXPOSE 5000
       CMD ["nodemon", "server.js"]

3. Buat be-compose.yaml

       version : '3.8'
       services:

         backend:
           build: .
           image: menther/literature-backend:latest
           container_name : backend
           restart: unless-stopped
           stdin_open : true
           ports:
            - 5000:5000

4. Jalankan

       docker compose -f be-compose.yaml up -d

   ![image](https://user-images.githubusercontent.com/40049149/192812799-01828616-120e-4ee7-ac11-eb497402bfd9.png)

## Deploy Backend 

1. Buat Dockerfile di directory frontEnd

       FROM node:15
       WORKDIR /app
       COPY . .
       RUN npm install -g serve
       EXPOSE 3000
       CMD [ "serve", "-s", "." ]

3. Buat fe-compose.yaml

       version : '3.8'
       services:

         frontend:
           build: .
           image: menther/literature-frontend:latest
           container_name : frontend
           restart: unless-stopped
           stdin_open : true
           ports:
            - 3000:3000

4. Jalankan

       docker compose -f fe-compose.yaml up -d

5. Follow https://certbot.eff.org/instructions?ws=nginx&os=ubuntufocal for certbot installation Use cloudflare plugin

       sudo snap install --classic certbot
       sudo ln -s /snap/bin/certbot /usr/bin/certbot
       sudo snap set certbot trust-plugin-with-root=ok
       sudo snap install certbot-dns-cloudflare

6. Use this command to generate and auto install certificate

       sudo certbot \
       -i nginx \
       --dns-cloudflare --dns-cloudflare-credentials ~/.secret/nginx.ini \
       -d frenky.studentdumbways.my.id \
       -d *.frenky.studentdumbways.my.id \
       -m kstones733@gmail.com \
       --agree-tos -n

7. if certificate installation shows error, try this command (shown on error log)

       sudo certbot install --cert-name frenky.studentdumbways.my.id

   ![Screenshot from 2022-09-29 12-37-43](https://user-images.githubusercontent.com/40049149/192949301-f29771a7-54c3-4ec8-a81b-923cf1e7e391.png)



































